version: 2

models:
  - name: customers
    description: Each record represents a customer.
    columns:
      - name: customer_id
        description: "{{ doc('customer_id') }}"
        tests:
          - unique
          - not_null
      - name: first_name
        description: A customer's first name.
      - name: last_name
        description: A customer's last name.
      - name: count_orders
        description: The number of orders a customer has had all-time.
      - name: first_order_at
        description: The timestamp of a customer's first order.
      - name: most_recent_order_at
        description: The timestamp of a customer's most recent order.
        
  - name: orders
    description: Each record represents an order.
    columns:
      - name: order_id
        tests:
          - unique
          - not_null

  - name: deliveries
    description: This model provides a comprehensive summary of delivery activities.
    columns:
      - name: customer_id
        description: A unique identifier for each customer.
        data_tests:
          - not_null
          - unique
      - name: total_order_count
        description: The total number of orders placed by the customer.
        data_tests:
          - not_null
      - name: total_delivery_count
        description: The total number of deliveries associated with the customer's orders.
        data_tests:
          - not_null
      - name: successful_delivery_count
        description: The number of deliveries that were successfully completed for the
          customer.
        data_tests:
          - not_null
      - name: failed_delivery_count
        description: The number of deliveries that were cancelled or failed for the customer.
        data_tests:
          - not_null
      - name: last_delivery_date
        description: The date of the most recent delivery for the customer.
        data_tests:
          - not_null