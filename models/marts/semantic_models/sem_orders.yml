semantic_models:
- name: orders
  description: Each record represents an order.
  model: ref('orders')
  defaults:
    agg_time_dimension: ordered_at
  entities:
  - name: order
    type: primary
    expr: order_id
  - name: customer
    type: foreign
    expr: customer_id
  - name: store
    type: foreign
    expr: store_id
  dimensions:
  - name: ordered_at
    type: time
    type_params:
      time_granularity: day
  - name: status
    expr: order_status
    type: categorical
  measures:
  - name: total_amount
    description: The total amount of the order.
    agg: sum
    create_metric: true
  - name: delivery_time_from_order
    description: Time in minutes from order to delivery.
    agg: average
    create_metric: true
  - name: delivery_time_from_collection
    description: Time in minutes from collection to delivery.
    agg: average
    create_metric: true
  - name: count_order
    agg: count
    create_metric: true
    expr: order_id
  - name: count_customer
    agg: count_distinct
    create_metric: true
    expr: customer_id
  - name: count_store
    agg: count_distinct
    create_metric: true
    expr: store_id
